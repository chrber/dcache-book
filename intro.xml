<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.3//EN"
                         "http://www.oasis-open.org/docbook/xml/4.3/docbookx.dtd" [
<!ENTITY % sharedents SYSTEM "shared-entities.xml" >
%sharedents;
]>

<chapter id="intro">

  <title>Introduction</title>

  <para>
    &dcache; is a distributed storage solution.  It organises storage
    across computers so the combined storage can be used without the
    end-users being aware of on precisely which computer their data is
    stored; end-users see simply a large amount of storage.
  </para>

  <para>
    Because end-users need not know on which computer their data is
    stored, their data can be migrated from one computer to another
    without any interruption of service.  This allows &dcache; storage
    computers to be taken out of service or additional machines (with
    additional storage) to be added without interrupting the service
    the end-users enjoy.
  </para>

  <para>
    &dcache; supports requesting data from a tertiary storage system.
    A tertiary storage system typically uses a robotic tape system,
    where data is stored on a tape from a library of available tapes,
    which must be loaded and unloaded using a tape robot.  Tertiary
    storage systems typically have a higher initial cost, but can be
    extended cheaply by added additional tapes.  This results in
    tertiary storage systems being popular where large amounts of data
    must be read.
  </para>

  <para>
    &dcache; also provides many transfer protocols (allowing users to
    read and write to data).  These have a modular deployment,
    allowing &dcache; to support expanded capacity by providing
    additional front-end machines.
  </para>

  <para>
    Another performance feature of &dcache; is hot-spot data
    migration.  In this process, &dcache; will detect when a few file
    are being requested very often.  If this happens, &dcache; can
    make duplicate copies of the popular files on other computers.
    This allows the load to be spread across multiple machines, so
    increasing throughput.
  </para>

  <para>
    The flow of data within &dcache; can also be carefully controlled.
    This is especially important for large sites as chaotic movement
    of data may lead to suboptimal usage; instead, incoming and
    outgoing data can be marshaled so they use designated resources;
    allowing better throughput and guaranteeing end-user experience.
  </para>

  <para>
    &dcache; provides a comprehensive administrative interface for
    configuring the &dcache; instance.  This is described in the later
    sections of this book.
  </para>


  <section>
    <title>Cells and Domains</title>

    <para>
      A <firstterm>cell</firstterm> is &dcache;'s most fundamental
      executable building block.  Even a small &dcache; deployment
      will have many cells, each of which has a specific task to
      perform.  Later sections will describe these cells and how they
      interact in more detail.
    </para>

    <para>
      A <firstterm>domain</firstterm> is a container for running
      cells.  Although the default configuration of &dcache; will be
      configured to start certain cells within specific domains, this
      layout is not required; instead, it's a reasonable default
      layout for a normal &dcache; instance.
    </para>

    <para>
      One can reconfigure &dcache; changing which cells the domains
      run.  In effect, cells can be freely moved from domain to
      domain, often without requiring any additional change to
      configuration.  This allows &dcache; to expand: as a service
      comes under increased usage, so additional hardware can be
      brought into play and &dcache; can spread the load over more
      hardware.
    </para>

    <para>
      A node (or computer) can host many domains, but the choice of
      which domains to run on a single machine will depend on expected
      load of the &dcache; instance.
    </para>

    <para>
      A domain requires precisely one Java Virtual Machine (JVM)
      instance, which it cannot share with any other domain.  In
      essence, a domain <emphasis>is</emphasis> the JVM with the
      additional functionality necessary to run cells.  Since domains
      each have an independent JVM, they share the node's resources
      such as memory, CPU time and network bandwidth.
    </para>
  </section>


<!--
  <section>
    <title>Pools of storage</title>

    <para>
      We introduce pools and poolgroups.
    </para>
  </section>

  <section>
    <title>Doors and movers</title>

    <para>
      Introduce doors...
    </para>
  </section>


  <section>
    <title>Linking &dcache; to the outside world</title>

    <para>
      Introduce unit, unitgroups and links.
    </para>
  </section>


  <section>
    <title>Storing data on tape</title>

    <para>
      Introduce HSM activity
    </para>

  </section>

  <section>
    <title>Linkgroups and SRM</title>

    <para>
      Introducing SRM concepts and linkgroups.
    </para>
  </section>

-->
  
  <figure id="fig-intro-layer-model">
    <title>The &dcache; Layer Model</title>
    <mediaobject>
      <imageobject role="fo">
	<imagedata fileref="images/test2.svg" format="SVG" align="center" contentwidth="16cm"/> 
                            <!-- width="100%" scalefit="1" contentdepth="100%" should scale optimal, but fop doesnt like it -->
      </imageobject>
      <imageobject role="html">
	<imagedata fileref="images/test.png" format="PNG" align="center"/>
      </imageobject>
    </mediaobject>
  </figure>

  <para>
    The layer model shown in <xref linkend="fig-intro-layer-model"/>
    gives an overview of the architecture of the &dcache; system.
  </para>

  <!-- TODO:
      companion

      finish replica manager

      Emails durchgehen: Patrick, Timur, Alex, Vladimir,...

      Where to put comments/help/release notes for actual USERS (srmcp and dccp, ...)
    -->
  
    <!-- TODO:
      Short description, features, overview of structure
    
      Filesystem - PNFS (Database), Data on Pools/Tape, Protocols, SRM (Database)
    
      Distributed server system, domains, cells, messages
    
      (Important) cells in a dCache system.

      Book assumes installations as described by the distribution. 
      -->
<!-- TODO 
      Todo somewhere:
    
      HSM - see dominik bernhard DONE

      Copy Manager - from Patrick

      unbalanced movers (CM?) - should be covered by CM doc. Or additional short cookbook entry with reference to CM doc?

      If a domain does not appear - should be covered by intouch

      ssh authorized_keys for scripting (tr -d '\r')
-->

</chapter>
